# S·ª≠ d·ª•ng vi-style
setw -g mode-keys vi

# Cho ph√©p s·ª≠ d·ª•ng chu·ªôt
set -g mouse on

# Th·ªùi gian chuy·ªÉn pane (ms)
set -g display-time 1000

# S·ªë l∆∞·ª£ng d√≤ng l·ªãch s·ª≠
set -g history-limit 20000  # Increased for better scrollback

# Reload config
bind r source-file ~/.tmux.conf \; display-message "üîÅ Reloaded!"

# Di chuy·ªÉn pane d·ªÖ h∆°n (h∆∞·ªõng vi)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Open note
bind-key n run-shell "$HOME/dotfiles/scripts/note.sh"

# Quick note binding - t·ª´ video Kunkka
bind-key E split-window -h \; send-keys "nvim ~/notes/notes-$(date +%Y%m%d-%H%M%S).md" Enter

# Status bar config (must be BEFORE TPM init for plugins to detect placeholders)
set -g status-keys vi
set -g status-style "bg=default,fg=white"
set -g status-position bottom
set -g status-interval 2
set -g status-left-length 100
set -g status-right-length 150
set -g status-left "#[fg=green,bold]Óûï  #S #[fg=white,nobold] | "
set -g status-right "#[fg=red]%Y-%m-%d %H:%M:%S | #[fg=white]Ôíº  #{cpu} | Óâ¶  #{mem} "
set -g window-status-current-format "#[fg=blue,bold] ‚Ä¢#[underscore]#I:#W"
set -g window-status-format "|#I:#W"

# Plugin Manager
set -g @plugin 'tmux-plugins/tpm'

# Plugins ƒë·ªÅ xu·∫•t:
set -g @plugin 'tmux-plugins/tmux-sensible'       # C√†i ƒë·∫∑t t·ªëi ∆∞u m·∫∑c ƒë·ªãnh
set -g @plugin 'tmux-plugins/tmux-resurrect'      # Kh√¥i ph·ª•c session layout
set -g @plugin 'tmux-plugins/tmux-continuum'      # Auto save layout
set -g @continuum-restore 'on'
set -g @resurrect-capture-pane-contents 'on'
set -g @plugin 'christoomey/vim-tmux-navigator'   # D√πng h/j/k/l di chuy·ªÉn vim + tmux
set -g @plugin 'tmux-plugins/tmux-yank'           # Better clipboard handling
set -g @plugin 'hendrikmi/tmux-cpu-mem-monitor'   # Monitor cpu va memory


# Source autocompletion config (keep this line near plugins)
if-shell '[ -f "$HOME/dotfiles/tmux/tmux-autocompletion.conf" ]' "source-file $HOME/dotfiles/tmux/tmux-autocompletion.conf"

# Note: AI coding assistance via sidekick.nvim (OpenCode integration)

# Kh·ªüi ƒë·ªông TPM
if "[[ ! -d $HOME/.tmux/plugins/tpm ]]" \
   "run-shell 'git clone https://github.com/tmux-plugins/tpm $HOME/.tmux/plugins/tpm'"
run '~/.tmux/plugins/tpm/tpm'

# Reload config & install plugin n·∫øu ch∆∞a c√≥
run-shell 'test ! -d ~/.tmux/plugins/tpm || ~/.tmux/plugins/tpm/bin/install_plugins'
