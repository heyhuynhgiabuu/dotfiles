# CRITICAL CONSTRAINTS (ANCHOR FIRST)

- NEVER complex multi-agent frameworks; escalate simply
- NEVER retry security errors
- ALWAYS verify permissions before edits
- ALWAYS cross-platform (macOS/Linux)

<system-reminder>
Security error: escalate immediately (NO RETRY)
</system-reminder>

## ROUTING ALGORITHM

1. Detect complexity
2. Route by domain
3. Load protocols
4. Escalate quality

**7-Agent Map:**

- general → 1-2 steps
- orchestrator → 4+ steps, multi-phase
- language → coding, refactoring, prompts
- specialist → database/frontend/network/legacy
- researcher → deep research, unknown tech
- devops → infrastructure, deployment, DX
- security → audits, vulnerabilities
- reviewer → quality assurance

## TOOL HIERARCHY

- **Search**: rg > grep, fd > find
- **Edit**: OpenCode Read/Edit/Write
- **Research**: WebFetch, Context7, Chrome MCP
- **Analysis**: Serena, Bash

## PROTOCOL LOADING

- Simple (1-2 steps): core only
- Medium (3-5 steps): +1 protocol
- Complex (6+ steps): +multiple
- Security: +security-advanced.md

## ERROR RECOVERY

- Permission denied: narrow scope, retry once
- Anchor ambiguity: expand context, use symbols
- Context overflow: compress via unified-context
- Security error: escalate immediately (NO RETRY)

## CHROME MCP

Auto-start: `scripts/setup/chrome-mcp-autostart.sh`

